<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web 音频提取器</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <h1>MP4 音频提取器 (Web版)</h1>

        <div class="card">
            <h2>1. 输入视频文件</h2>
            <div id="drop-area">
                <p>将 MP4 文件拖放到此处 或 点击选择</p>
                <input type="file" id="file-input" multiple accept="video/mp4,*.mp4">
            </div>
            <div id="file-list-container">
                <strong>已选择文件:</strong>
                <ul id="file-list">
                    <li id="no-files-selected">尚未选择文件</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>2. 设置选项</h2>
            <div class="options-grid">
                <!-- Speed -->
                <label for="speed-input">倍速:</label>
                <input type="number" id="speed-input" value="2.0" step="0.5" min="0.5" max="4.0">

                <!-- Downsample -->
                <label for="downsample-check">降低采样率:</label>
                <div class="checkbox-container">
                     <input type="checkbox" id="downsample-check">
                     <span>(22.05kHz)</span>
                </div>

                <!-- Split -->
                <label for="split-check">音频分割:</label>
                <input type="checkbox" id="split-check">

                <!-- Split Options -->
                <label for="split-options" class="split-options-label">分割时长:</label>
                <div class="split-options-controls">
                    <select id="split-options" disabled>
                        <option value="no-split">不分割</option>
                        <option value="1800">30分钟</option>
                        <option value="3600">1小时</option>
                        <option value="custom">自定义</option>
                    </select>
                    <input type="number" id="custom-split-input" placeholder="秒" min="1" disabled>
                </div>
            </div>
             <p class="note">注意：合并多个文件时，将强制启用音频分割（或合并为单个文件），且默认输出文件名为 `output.mp3`。</p>
        </div>

        <div class="card">
            <h2>3. 开始处理</h2>
            <button id="start-btn">开始提取</button>
            <div class="progress-container">
                <progress id="progress-bar" value="0" max="100"></progress>
                <span id="progress-label">0%</span>
            </div>
             <p id="ffmpeg-status-label" class="status-label"></p>
        </div>

        <div class="card" id="output-area" style="display:none;">
            <h2>4. 下载文件</h2>
            <div id="download-links"></div>
        </div>

        <div class="card">
            <h2>FFmpeg 日志</h2>
            <pre id="log-output">等待开始处理...</pre>
        </div>
    </div>

    <!-- FFmpeg.wasm via CDN -->
    <script src="https://unpkg.com/@ffmpeg/ffmpeg@0.12.10/dist/umd/ffmpeg.js"></script>
    <script src="js/main.js"></script>
</body>
</html> 